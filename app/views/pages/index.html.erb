<% @page_title = "Pages" %>

<%= link_to("Back", subjects_path) %>
<div>

<h2>Pages</h2>
<%= link_to("Add New", new_page_path(:subject_id => @subject.id))%>

<table>
    <thead>
    <tr>
        <th>#</th>
        <th>Page</th>
        <th>Permalink</th>
        <th>Visible</th>
        <th>Subject</th>
        <th>Sections</th>
        <th>Actions</th>
    </tr>
    </thead>

    <tbody>

    <% @pages.each do |page| %>
    <tr>
        <td><%= page.position %></td>
        <td><%= page.name %></td>
        <td><%= page.permalink %></td>
        <td><%= status_tag(page.visible) %></td>
        <td><%= page.subject.name %></td>
        <td><%= page.sections.size %></td>
        <td>
            <%= link_to("View Sections", sections_path(:page_id => page.id)) %>
            <%= link_to("Show", page_path(page, :subject_id => @subject.id)) %>
            <%= link_to("Edit", edit_page_path(page, :subject_id => @subject.id)) %>

            <%= form_for(page, :url => page_path(page, :subject_id => @subject.id), :method => "delete") do |f| %>
                <%= f.submit("Delete") %>
            <% end %>
        </td>
    </tr>
    <% end %>

    </tbody>
</table>

</div>